(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1027:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var o,n=r(37),i=(o=r(1108))&&o.__esModule?o:{default:o},s=r(44);var a=r(55),l=r(166).getConversation,c=r(442),u=function(e){var t=c(e)[0];return{isFetching:t.isFetching,isFetched:!(0,s.isPartiallyFetched)(t),conversation:t}};t.mapStateToProps=u;var d=function(t){return{onFetch:function(e){t(l(a,e))}}};t.mapDispatchToProps=d;var p=function(e,t,r){return Object.assign({},e,t,r,{onFetch:function(){t.onFetch(e.conversation.id)}})};t.mergeProps=p;var f=(0,n.connect)(u,d,p)(i.default);t.default=f},1028:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var o=r(37),n=s(r(1065)),i=r(1064),c=r(122),u=s(r(848));function s(e){return e&&e.__esModule?e:{default:e}}var d=r(24),a=r(55),l=r(165).openConversation,p=r(1207),f=p.openMessage,h=p.closeMessage,m=r(166),v=m.markConversationAsRead,y=m.getConversation,b=m.createReaction,g=r(743).dismissPointerMessage,w=function(e){var t=e.user.isPresent,r=e.app,o=r.name,n=r.userConversationAttachmentsEnabled,i=r.userConversationGifsEnabled,s=(0,u.default)(e),a=s[0],l=d.isMobileBrowser();return{appName:o,conversation:a,part:s[0].parts[0],userIsPresent:t,isMobile:l,showUploadButton:n,showGifButton:i,shouldShowUpfrontEmailComposer:(0,c.shouldShowUpfrontEmailSelector)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}};t.mapStateToProps=w;var O=(0,o.connect)(w,function(r){return{onOpen:function(e,t){r(f(e,t))},onClose:function(e){r(h()),r(g(e))},onConversationRead:function(e){r(v(a,e))},onComposerOrFormInputClick:function(e){r(h()),r(g(e)),r(l(e)),r(y(a,e))},onReactionSelect:function(e,t){r(b(a,e,t,!1))}}},i.mergeProps)(n.default);t.default=O},1029:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapDispatchToProps=t.mapStateToProps=void 0;var o,n=r(37),i=r(772),s=r(744),a=(o=r(1208))&&o.__esModule?o:{default:o};var l=function(e){var t=(0,i.activeTourStepSelector)(e),r=(0,i.activeTourStepIndex)(e),o=(0,i.activeTourStepCount)(e),n=(0,i.activeTourAuthor)(e);return{activeStep:t,activeStepIndex:r,stepCount:o,appName:e.app.name,author:n}};t.mapStateToProps=l;var c=function(e){return{onContinue:function(){e((0,s.progressTour)())},onStop:function(){e((0,s.stopTour)())}}};t.mapDispatchToProps=c;var u=(0,n.connect)(l,c)(a.default);t.default=u},1064:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var o,n=r(37),i=(o=r(1065))&&o.__esModule?o:{default:o},d=r(122),p=r(44);var s=r(55),f=r(24),a=r(432),l=a.openMessage,c=a.closeMessage,u=a.recordMessageSent,h=r(165).openConversation,m=r(166),v=m.markConversationAsRead,y=m.getConversation,b=m.createReaction,g=r(442),w=function(e){var t=e.user.isPresent,r=e.app,o=r.name,n=r.userConversationAttachmentsEnabled,i=r.userConversationGifsEnabled,s=e.message.partId,a=g(e)[0],l=f.isMobileBrowser(),c=void 0!==s?a.parts.find(function(e){return e.id===s}):(0,p.messageOrAdminReply)(a),u=c.messageType;return u=u||"adminReply",{appName:o,conversation:a,part:c=Object.assign({},c,{messageType:u}),userIsPresent:t,isMobile:l,showUploadButton:n,showGifButton:i,shouldShowUpfrontEmailComposer:(0,d.shouldShowUpfrontEmailSelector)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}};t.mapStateToProps=w;var O=function(r){return{onOpen:function(e,t){r(l(e,t)),r(u(e,t))},onClose:function(){r(c())},onConversationRead:function(e){r(v(s,e))},onComposerOrFormInputClick:function(e){r(c()),r(h(e)),r(y(s,e))},onReactionSelect:function(e,t){r(b(s,e,t,!1))}}};t.mapDispatchToProps=O;var C=function(r,o,e){return Object.assign({},r,o,e,{onOpen:function(){var e=r.conversation,t=r.part;o.onOpen(e.id,t.id)},onConversationRead:function(){o.onConversationRead(r.conversation.id)},onComposerOrFormInputClick:function(){o.onComposerOrFormInputClick(r.conversation.id)},onReactionSelect:function(e){o.onReactionSelect(r.conversation.id,e)},onClose:function(){var e=r.conversation;o.onClose(e.id)}})};t.mergeProps=C;var _=(0,n.connect)(w,O,C)(i.default);t.default=_},1065:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(3)),f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),h=n(r(1109)),m=n(r(1144)),v=n(r(1147)),y=n(r(1077)),b=n(r(1154)),g=n(r(1159));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(o){var e,t;function r(){for(var s,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(i(i(s=o.call.apply(o,[this].concat(t))||this)),"addMessageMetric",function(e){var t=s.props,r=t.conversation,o=t.part,n=o.id,i=o.messageType;s.context.addMetric(e,"message","in_app","from_full",{conversation_id:r.id,message_id:n,message_type:i})}),a(i(i(s)),"handleDismissClick",function(){s.addMessageMetric("closed"),s.props.onClose()}),s}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentWillMount=function(){var e=this.props,t=e.conversation,r=e.userIsPresent,o=e.onOpen,n=e.onConversationRead;o(),!t.read&&r&&n()},n.componentDidMount=function(){this.addMessageMetric("received")},n.componentWillUpdate=function(e){var t=e.userIsPresent,r=e.conversation;t&&!r.read&&this.props.onConversationRead()},n.render=function(){var e=this.props,t=e.appWindow,r=e.conversation,o=e.part,n=e.appName,i=e.isMobile,s=e.onComposerOrFormInputClick,a=e.onReactionSelect,l=e.showUploadButton,c=e.showGifButton,u=e.shouldShowUpfrontEmailComposer,d=o.messageType,p=o.reactionsReply;switch(d){case"adminReply":case"link":case"messengerCard":case"notificationChannels":case"attributeCollector":case"conversationRating":case"chat":return i?f.default.createElement(h.default,{appName:n,part:o,onClose:this.handleDismissClick,composerState:r.composerState,onComposerOrFormInputClick:s}):f.default.createElement(g.default,{conversation:r,part:o,onClose:this.handleDismissClick,showReplyToButton:u,onComposerClick:s});case"video":return f.default.createElement(b.default,{conversation:r,standalone:!0,part:o,onClose:this.handleDismissClick,onComposerOrFormInputClick:s});case"note":return f.default.createElement(m.default,{conversationId:r.id,appName:n,message:o,reactionsReply:p,showUploadButton:l,showGifButton:c,onClose:this.handleDismissClick,onComposerClick:s,onReactionSelect:a,showReplyToButton:u});case"post":return f.default.createElement(y.default,{conversationId:r.id,appName:n,message:o,reactionsReply:p,onClose:this.handleDismissClick,onComposerClick:s,onReactionSelect:a,showReplyToButton:u});case"pointer":return f.default.createElement(v.default,{appWindow:t,appName:n,message:o,conversationId:r.id,reactionsReply:p,onComposerClick:s,onReactionSelect:a,onClose:this.handleDismissClick})}},r}(f.Component);(t.default=s).propTypes={appWindow:o.default.object,conversation:o.default.shape({read:o.default.bool.isRequired}).isRequired,part:o.default.shape({messageType:o.default.string}).isRequired,appName:o.default.string.isRequired,isMobile:o.default.bool.isRequired,userIsPresent:o.default.bool.isRequired,onConversationRead:o.default.func.isRequired,onOpen:o.default.func.isRequired,onClose:o.default.func.isRequired,onComposerOrFormInputClick:o.default.func.isRequired,onReactionSelect:o.default.func.isRequired,showUploadButton:o.default.bool,showGifButton:o.default.bool,shouldShowUpfrontEmailComposer:o.default.bool},s.contextTypes={addMetric:o.default.func}},1075:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(r(178)),i=n(r(1076)),s=o(r(2)),a=n(r(1150)),c=n(r(15)),u=n(r(1151)),d=n(r(419)),p=r(70),f=o(r(1152)),h=o(r(1153));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(e){y(t,e,r[e])})}return t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y(v(v(o=n.call.apply(n,[this].concat(t))||this)),"arrow",void 0),y(v(v(o)),"node",void 0),y(v(v(o)),"arrowContainer",void 0),y(v(v(o)),"positioner",void 0),y(v(v(o)),"intersectionOverserver",void 0),y(v(v(o)),"state",{styles:null,arrowStyles:null,hide:!1,nodeInViewPort:!1,positionerOffsetForMask:{left:0,top:0}}),y(v(v(o)),"updateElementPosition",function(e){var t=e.styles,r=e.arrowStyles;return o.setState({styles:t,arrowStyles:r,hide:!o.targetIsVisible()}),e.attributes&&o.applyAttributes(e.attributes),e}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){this.initializeIntersectionObserver(),this.initializePositioner()},o.shouldComponentUpdate=function(e,t){return!(0,i.default)(this.props,e)||!(0,i.default)(this.state,t)},o.componentDidUpdate=function(e){e.targetSelector!==this.props.targetSelector?(this.reinitializeIntersectionObserver(),this.reinitializePointer()):this.positioner?this.positioner.scheduleUpdate():this.initializePositioner()},o.componentWillUnmount=function(){var e=this.props.appWindow;this.destroyIntersectionObserver(),this.destroyPositioner(),(0,f.RemoveIntersectionWindowContext)(e),(0,h.removeScrollIntoViewPolyfill)(e)},o.getTargetNode=function(){var e=this.props,t=e.targetSelector,r=e.appWindow;try{return r.document.querySelector(t)}catch(e){return null}},o.storeMaskOffsetsBasedOnFlipPosition=function(e){if(this.props.scrollable)switch(e["x-placement"]){case"bottom":this.setState({positionerOffsetForMask:{left:0,top:3}});break;case"top":this.setState({positionerOffsetForMask:{left:0,top:-3}});break;case"left":this.setState({positionerOffsetForMask:{left:-5,top:0}});break;case"right":this.setState({positionerOffsetForMask:{left:3,top:0}});break;default:return}},o.applyAttributes=function(r){var e=this;[this.arrowContainer,this.node].forEach(function(t){t&&"function"==typeof t.querySelectorAll&&Object.keys(r).forEach(function(e){t&&t.setAttribute&&t.setAttribute(e,r[e])}),e.storeMaskOffsetsBasedOnFlipPosition(r)})},o.targetIsVisible=function(){if(!this.state.nodeInViewPort)return!1;var e=this.getTargetNode();return(0,p.nodeIsVisible)(e)},o.scrollIntoView=function(){var t=this,e=this.props.appWindow;(0,h.default)(e);var r=this.getTargetNode();setTimeout(function(){var e=t.state.nodeInViewPort;r&&!e&&r.intercomScrollIntoView({behavior:"smooth",block:"end"})},200)},o.initializePositioner=function(){var e=this.props.scrollable,t=this.getTargetNode();t&&this.node&&(e&&this.scrollIntoView(),this.positioner=new a.default(t,this.node,{positionFixed:!1,placement:"auto",modifiers:{applyStyle:{enabled:!1},preventOverflow:{boundariesElement:"viewport"},arrow:{enabled:!0,element:this.arrow},updateElementPosition:{enabled:!0,fn:this.updateElementPosition,order:900}}}))},o.initializeIntersectionObserver=function(){var s=this,e=this.props.appWindow,a=this.getTargetNode();a&&(e.IntercomIntersectionObserver||(0,f.default)(e),this.intersectionOverserver=new e.IntercomIntersectionObserver(function(e){if(0!==e.length){var t=(0,l.default)(e,["time"],["desc"])[0],r=t.isIntersecting,o=t.intersectionRatio,n=r&&.5<=o,i=n&&(0,p.nodeIsVisible)(a);s.setState({hide:!i,nodeInViewPort:n})}},{threshold:.5}),this.intersectionOverserver.observe(a))},o.destroyPositioner=function(){this.positioner&&this.positioner.destroy()},o.destroyIntersectionObserver=function(){this.intersectionOverserver&&this.intersectionOverserver.disconnect()},o.reinitializePointer=function(){this.destroyPositioner(),this.initializePositioner()},o.reinitializeIntersectionObserver=function(){this.destroyIntersectionObserver(),this.initializeIntersectionObserver()},o.getMaskClassNames=function(){var e=this.getTargetNode();return(0,c.default)({"intercom-positioner-mask":!0,"intercom-positioner-mask-step":this.props.scrollable&&e,"intercom-positioner-mask-post":this.props.scrollable&&!e})},o.mergedStyles=function(){var e=this.props.scrollable,t=this.state,r=t.styles,o=t.positionerOffsetForMask;if(!r)return{};if(!e)return r;var n=o.left,i=o.top;return m({},r,{left:r.left+n,top:r.top+i})},o.getStyles=function(){var e=this.props.childDimensions||{},t=e.height,r=e.width;if(this.getTargetNode()){var o=!this.state.hide&&t&&r?1:0;return m({},this.mergedStyles(),{opacity:o})}if(this.props.renderFallback)return{position:"fixed",top:"calc(50% - "+(t||0)/2+"px)",left:"calc(50% - "+(r||0)/2+"px)"}},o.getArrowStyles=function(){var e=this.state,t=e.arrowStyles,r=e.hide,o=this.props.childDimensions||{},n=o.height,i=o.width,s=!r&&n&&i?1:0;if(!t)return{opacity:s};var a=t.top;return""!==a&&(a+=5),{top:a,left:t.left,opacity:s}},o.getMaskStyles=function(){var e=this.getTargetNode();if(!e||!this.props.scrollable||this.state.hide)return{};var t=e.getBoundingClientRect(),r=t.top,o=t.left,n=t.width,i=t.height,s=this.props.appWindow;return{padding:3,top:r-3+s.scrollY,left:o-3+s.scrollX,width:n,height:i}},o.renderArrow=function(){var t=this;return s.default.createElement("div",{className:"intercom-positioner-arrow-wrapper",style:m({},this.getArrowStyles()),ref:function(e){return t.arrow=e}},s.default.createElement(d.default,{frameName:"intercom-positioner-arrow-frame",className:"intercom-positioner-arrow-frame"},function(){return s.default.createElement("div",{className:"intercom-positioner-arrow",ref:function(e){return t.arrowContainer=e}})}))},o.render=function(){var t=this;return this.getTargetNode()||this.props.renderFallback?s.default.createElement(u.default,{appWindow:this.props.appWindow},s.default.createElement("span",null,s.default.createElement("div",{ref:function(e){return t.node=e},className:"intercom-positioner-wrapper",style:this.getStyles()},s.default.createElement("div",{className:"intercom-positioner-animation-wrapper"},this.getTargetNode()?this.renderArrow():null,this.props.children)),s.default.createElement("div",{className:this.getMaskClassNames(),style:this.getMaskStyles()}),s.default.createElement("div",{className:(0,c.default)({"intercom-positioner-overlay":this.props.scrollable})}))):null},r}(s.Component);y(t.default=b,"defaultProps",{renderFallback:!1})},1078:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),s=(o=r(1079))&&o.__esModule?o:{default:o};function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return l(a(a(t=n.call.apply(n,[this].concat(r))||this)),"state",{height:0}),l(a(a(t)),"handleShow",function(e){t.setState({height:e}),t.props.onShow&&t.props.onShow(e)}),l(a(a(t)),"handleHide",function(){t.setState({height:0}),t.props.onHide&&t.props.onHide()}),t}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getStyle=function(){var e=this.state.height;return{height:e,opacity:0===e?0:1,transition:0===e?"none":void 0}},o.render=function(){var e=this.props,t=e.conversation,r=e.isVisible;return i.default.createElement("div",{className:"intercom-borderless-conversation-quick-replies",style:this.getStyle()},i.default.createElement(s.default,{conversation:t,isVisible:r,isBorderless:!0,onShow:this.handleShow,onHide:this.handleHide}))},r}(i.PureComponent);t.default=n},1082:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedBorderlessConversation=t.default=t.PARTS_BODY_PADDING=void 0;var o=y(r(3)),d=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),p=y(r(1083)),i=y(r(1078)),l=y(r(1190)),s=y(r(1203)),a=y(r(709)),c=y(r(15)),u=r(31),f=r(44),n=y(r(1092)),h=y(r(1054)),m=y(r(698)),v=r(699);function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.PARTS_BODY_PADDING=20;var w=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g(b(b(o=n.call.apply(n,[this].concat(t))||this)),"state",{isEmojiPickerOpen:!1,isGifPickerOpen:!1,isHeaderVisible:!1,headerHeight:50,partsHeight:0,quickRepliesHeight:0,composerHeight:0,replyToButtonHeight:0}),g(b(b(o)),"handlePartsHeightChange",function(e){o.setState({partsHeight:e},o.handleHeightChange)}),g(b(b(o)),"handleQuickRepliesShow",function(e){o.setState({quickRepliesHeight:e},o.handleHeightChange)}),g(b(b(o)),"handleQuickRepliesHide",function(){o.setState({quickRepliesHeight:0},o.handleHeightChange)}),g(b(b(o)),"handleComposerShow",function(e){o.setState({composerHeight:e},o.handleHeightChange)}),g(b(b(o)),"handleComposerHide",function(){o.setState({composerHeight:0},o.handleHeightChange)}),g(b(b(o)),"handleReplyToButtonShow",function(e){o.setState({replyToButtonHeight:e},o.handleHeightChange)}),g(b(b(o)),"handleClick",function(){var e=o.state,t=e.isEmojiPickerOpen,r=e.isGifPickerOpen;t?o.setState({isEmojiPickerOpen:!1}):r&&o.setState({isGifPickerOpen:!1})}),g(b(b(o)),"handleDismissClick",function(e){e.stopPropagation(),o.addCloseMetric(),o.props.onClose();var t=(0,v.launcherFirstFocusableElement)();t&&t.focus()}),g(b(b(o)),"handleEmojiPickerToggle",function(){var e=!o.state.isEmojiPickerOpen;o.setState({isEmojiPickerOpen:e}),o.props.onPopoverToggle(e)}),g(b(b(o)),"handleGifPickerToggle",function(){var e=!o.state.isGifPickerOpen;o.setState({isGifPickerOpen:e}),o.props.onPopoverToggle(e)}),g(b(b(o)),"handleMouseEnter",function(){o.setState({isHeaderVisible:!0})}),g(b(b(o)),"handleMouseLeave",function(){o.setState({isHeaderVisible:!1})}),g(b(b(o)),"handleViewMoreClick",function(){o.addViewMoreMetric(),o.props.onViewMore()}),g(b(b(o)),"handleHeightChange",function(){o.props.onHeightChange(o.getHeight())}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentWillMount=function(){this.props.onOpen()},o.componentDidMount=function(){this.focusTrap=new m.default({document:this.props.frameWindow.document})},o.componentDidUpdate=function(e){var t=this.props.conversation;"all"===t.fetchState&&(0,f.getAdminPartCount)(t)>(0,f.getAdminPartCount)(e.conversation)&&this.addReplyMetric(t)},o.componentWillUnmount=function(){this.focusTrap&&this.focusTrap.restore()},o.getHeight=function(){var e=this.state;return e.headerHeight+e.partsHeight+e.composerHeight+e.quickRepliesHeight+e.replyToButtonHeight+20},o.getStyle=function(){return{height:this.getHeight()}},o.getHeaderClassName=function(){return(0,c.default)({"intercom-borderless-header":!0,"intercom-borderless-header-visible":this.state.isHeaderVisible})},o.getClassName=function(){return(0,c.default)({"intercom-borderless":!0,"intercom-borderless-left-aligned":"left"===this.props.alignment,"intercom-borderless-has-composer":this.hasComposer()})},o.hasComposer=function(){var e=this.props.conversation,t=e.parts,r=e.composerState;return"attribute_collector"===t[0].replyType||r.visible},o.shouldRenderHeader=function(){var e=this.state,t=e.isEmojiPickerOpen,r=e.isGifPickerOpen;return!(t||r)},o.addViewMoreMetric=function(){this.context.addMetric("clicked","viewmore_button","borderless","",{conversation_id:this.props.conversation.id})},o.addReplyMetric=function(){var e=this.props.conversation,t=(0,f.getLastAdminPart)(e);this.context.addMetric("received","reply","borderless","",{conversation_id:e.id,part_id:t.id,part_type:"adminReply",reply_type:t.replyType})},o.addCloseMetric=function(){this.context.addMetric("closed","borderless","borderless","from_close_button",{conversation_id:this.props.conversation.id})},o.renderHeader=function(){var t=this;return d.default.createElement("div",{className:this.getHeaderClassName()},d.default.createElement("div",{className:"intercom-borderless-button-wrapper"},this.props.hasHistory?this.renderViewMoreButton():null,d.default.createElement("div",{className:"intercom-borderless-dismiss-button",onClick:t.handleDismissClick,"aria-label":(0,u.translate)("dismiss"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleDismissClick(e)},role:"button",tabIndex:"0"},d.default.createElement("span",null))))},o.renderViewMoreButton=function(){var t=this;return d.default.createElement("div",{className:"intercom-borderless-view-more-button",onClick:t.handleViewMoreClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleViewMoreClick(e)},role:"button",tabIndex:"0"},d.default.createElement("span",null,(0,u.translate)("view_more")))},o.renderParts=function(){var e=this.props,t=e.appName,r=e.userRole,o=e.conversation,n=e.onArticleCardClick,i=e.onReactionSelect,s=e.onRetry,a=e.frameWindow,l=this.state,c=l.isEmojiPickerOpen,u=l.isGifPickerOpen;return d.default.createElement(p.default,{isBorderless:!0,isFaded:c||u,maxHeight:0,appName:t,userRole:r,conversation:o,frameWindow:a,onArticleCardClick:n,onHeightChange:this.handlePartsHeightChange,onReactionSelect:i,onRetry:s})},o.renderQuickReplies=function(e){return d.default.createElement(i.default,{conversation:this.props.conversation,isVisible:e,onShow:this.handleQuickRepliesShow,onHide:this.handleQuickRepliesHide})},o.renderFooter=function(){var e=this.state,t=e.isEmojiPickerOpen,r=e.isGifPickerOpen,o=this.props,n=o.showReplyToButton,i=o.onComposerClick,s=o.conversation,a=o.frameWindow;return n&&(0,f.isVisible)(this.props.conversation)?d.default.createElement(h.default,{onShow:this.handleReplyToButtonShow,onClick:i}):d.default.createElement(l.default,{conversation:s,showEmojiPicker:t,showGifPicker:r,onShow:this.handleComposerShow,onHide:this.handleComposerHide,onEmojiPickerToggle:this.handleEmojiPickerToggle,onGifPickerToggle:this.handleGifPickerToggle,frameWindow:a})},o.render=function(){var r=this,e=this.props,t=e.conversation,o=e.frameNode,n=this.state.composerHeight;return d.default.createElement("div",{className:this.getClassName(),style:this.getStyle(),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,tabIndex:"-1",role:"region",ref:function(e){return r.borderlessNode=e}},this.shouldRenderHeader()?this.renderHeader():null,d.default.createElement("div",{className:"intercom-borderless-body"},d.default.createElement(s.default,{conversation:t,composerHeight:n,borderlessHeight:this.borderlessNode&&this.borderlessNode.clientHeight,frameNode:o},function(e){var t=e.isScrolled;return d.default.createElement("div",{className:"intercom-borderless-conversation-body-inner"},r.renderParts(),r.renderQuickReplies(!t))}),this.renderFooter()),d.default.createElement(a.default,{appWindow:this.props.frameWindow}))},r}(d.Component);(t.default=w).propTypes={conversation:o.default.shape({id:o.default.string.isRequired,fetchState:o.default.oneOf(["summary","partial","all"]),parts:o.default.arrayOf(o.default.shape({id:o.default.string,replyType:o.default.oneOf(["text","attribute_collector"])})).isRequired,composerState:o.default.shape({visible:o.default.bool.isRequired}).isRequired}),appName:o.default.string.isRequired,userRole:o.default.string.isRequired,hasHistory:o.default.bool,alignment:o.default.string,onOpen:o.default.func.isRequired,onHeightChange:o.default.func.isRequired,onPopoverToggle:o.default.func.isRequired,onArticleCardClick:o.default.func.isRequired,onReactionSelect:o.default.func.isRequired,onRetry:o.default.func.isRequired,onViewMore:o.default.func.isRequired,onClose:o.default.func.isRequired,onComposerClick:o.default.func.isRequired,frameWindow:o.default.any.isRequired,showReplyToButton:o.default.bool,part:o.default.object,frameNode:o.default.object.isRequired},w.contextTypes={addMetric:o.default.func};var O=(0,n.default)(w);t.IndexedBorderlessConversation=O},1108:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(3)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),s=r(128),a=n(r(1064));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=o.prototype;return n.componentWillMount=function(){var e=this.props,t=e.isFetching,r=e.isFetched,o=e.onFetch;t||r||o()},n.render=function(){var e=this.props;return i.default.createElement(s.TransitionGroup,null,e.isFetched?i.default.createElement(s.CSSTransition,{classNames:"intercom-message",timeout:{enter:200,exit:200}},i.default.createElement(a.default,e)):null)},o}(i.Component);(t.default=l).propTypes={isFetching:o.default.bool.isRequired,isFetched:o.default.bool.isRequired,onFetch:o.default.func.isRequired}},1109:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(3)),n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),i=a(r(1066)),s=a(r(15)),l=a(r(1052)),c=r(31),u=a(r(1038)),d=a(r(1040));function a(e){return e&&e.__esModule?e:{default:e}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=r(24).isMobileBrowser,h=function(a){var e,t;function r(){for(var t,e,r,o,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=a.call.apply(a,[this].concat(i))||this,e=p(p(t)),o=function(e){e.stopPropagation(),t.props.onClose()},(r="handleDismissClick")in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,t}t=a,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getDismissButtonClassName=function(){return(0,s.default)({"intercom-chat-dismiss-button-mobile":f(),"intercom-chat-dismiss-button":!f()})},o.renderComposer=function(){var e=this.props.part.author.firstName;return n.default.createElement("div",{className:"intercom-chat-composer"},n.default.createElement("span",{className:"intercom-composer-placeholder"},(0,c.translate)("reply_to_name",{name:e})),n.default.createElement("div",{className:"intercom-composer-buttons"},n.default.createElement("span",{className:"intercom-composer-emoji-button"},n.default.createElement(d.default,null)),n.default.createElement("span",{className:"intercom-composer-upload-button"},n.default.createElement(u.default,null))))},o.renderAttributeCollectorCard=function(){return n.default.createElement(l.default,{part:this.props.part,hasAvatar:!1,isBorderless:f(),isMobile:f(),isReplyType:!0,frameWindow:void 0})},o.renderDismissButton=function(){var t=this;return n.default.createElement("div",{className:this.getDismissButtonClassName(),onClick:t.handleDismissClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleDismissClick(e)},role:"button",tabIndex:"0"},n.default.createElement("span",null,(0,c.translate)("clear")))},o.renderReplyType=function(){switch(this.props.part.replyType){case"attribute_collector":return this.renderAttributeCollectorCard();default:return this.renderComposer()}},o.renderChatCardGroup=function(){return n.default.createElement(i.default,{appName:this.props.appName,part:this.props.part,isBorderless:f(),isMobile:f()})},o.render=function(){var e=this.props,t=e.composerState,r=e.onComposerOrFormInputClick;return n.default.createElement("div",{className:"intercom-chat",onClick:r,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&r(e)},role:"button",tabIndex:"0"},this.renderChatCardGroup(),this.renderDismissButton(),t.visible&&this.renderReplyType())},r}(n.Component);(t.default=h).propTypes={part:o.default.shape({author:o.default.object.isRequired,body:o.default.array.isRequired}).isRequired,appName:o.default.string.isRequired,composerState:o.default.shape({visible:o.default.bool.isRequired}),onClose:o.default.func.isRequired,onComposerOrFormInputClick:o.default.func.isRequired}},1144:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),h=o(r(419)),m=o(r(1145)),v=o(r(429)),y=o(r(709));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return s(i(i(r=n.call.apply(n,[this].concat(t))||this)),"state",{height:0}),s(i(i(r)),"handleHeightChange",function(e){var t=e.height;r.setState({height:t})}),r}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r.prototype.render=function(){var t=this,e=this.props,r=e.conversationId,o=e.appName,n=e.message,i=e.reactionsReply,s=e.showUploadButton,a=e.showGifButton,l=e.onComposerClick,c=e.onReactionSelect,u=e.showReplyToButton,d=e.onClose,p=this.state.height;return f.default.createElement(h.default,{style:{height:p},className:"intercom-note-frame",frameName:"intercom-note-frame"},function(e){return f.default.createElement("span",null,f.default.createElement(v.default,{id:"note-frame",key:"note-frame",onChange:t.handleHeightChange},f.default.createElement(m.default,{frameWindow:e,conversationId:r,appName:o,message:n,reactionsReply:i,showUploadButton:s,showGifButton:a,onClose:d,onComposerClick:l,onReactionSelect:c,showReplyToButton:u})),f.default.createElement(y.default,{appWindow:e}))})},r}(f.Component);t.default=n},1145:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(3)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),i=n(r(15)),d=n(r(1039)),p=n(r(1035)),f=n(r(828)),s=n(r(1044)),a=r(70),h=r(31),l=n(r(1038)),c=n(r(1040)),m=n(r(1073)),v=n(r(1054));function n(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g(b(b(o=n.call.apply(n,[this].concat(t))||this)),"state",{isFooterVisible:!0,isScrolled:!1}),g(b(b(o)),"handleScroll",function(e){var t=o.state.isFooterVisible,r=(0,a.getScrollBottom)(e.target);o.setState({isFooterVisible:t||r<=o.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),g(b(b(o)),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,r=o.state.isFooterVisible||void 0===o.props.reactionsReply||t<=o.getReactionsVisibilityThreshold();o.setState({isFooterVisible:r})}),g(b(b(o)),"getBodyClassName",function(){return(0,i.default)({"intercom-note-body":!0,"intercom-note-reply-to-body":o.props.showReplyToButton})}),g(b(b(o)),"addClickedComposerMetric",function(){var e=o.props,t=e.message.id,r=e.conversationId;o.context.addMetric("clicked","composer","in_app","from_full",{message_type:"note",message_id:t,conversation_id:r})}),g(b(b(o)),"handleComposerClick",function(){o.addClickedComposerMetric(),o.props.onComposerClick()}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},o.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},o.getClassNames=function(){return(0,i.default)({"intercom-note":!0,"intercom-note-scrolled":this.state.isScrolled})},o.getFooterClassNames=function(){return(0,i.default)({"intercom-note-footer":!0,"intercom-note-footer-visible":this.state.isFooterVisible,"intercom-note-footer-text-center":this.props.showReplyToButton})},o.renderFooter=function(){var t=this,e=this.props,r=e.showUploadButton,o=e.showGifButton;return e.showReplyToButton?u.default.createElement(v.default,{onClick:this.handleComposerClick}):u.default.createElement("div",{className:"intercom-note-composer",onClick:t.handleComposerClick,"aria-label":(0,h.translate)("open_conversation_and_reply"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleComposerClick(e)},role:"button",tabIndex:"0"},u.default.createElement("span",{className:"intercom-composer-placeholder"},(0,h.translate)("reply_to_conversation")),u.default.createElement("div",{className:"intercom-composer-buttons"},o?u.default.createElement("span",{className:"intercom-composer-gif-button"},u.default.createElement(m.default,null)):null,u.default.createElement("span",{className:"intercom-composer-emoji-button"},u.default.createElement(c.default,null)),r?u.default.createElement("span",{className:"intercom-composer-upload-button"},u.default.createElement(l.default,null)):null))},o.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,r=e.onReactionSelect;return u.default.createElement(s.default,y({},t,{onReactionSelect:r}))},o.render=function(){var t=this,e=this.props,r=e.appName,o=e.message,n=e.reactionsReply,i=e.onClose,s=e.frameWindow,a=o.author,l=o.lastActiveAt,c=o.body;return u.default.createElement("div",{className:this.getClassNames()},u.default.createElement(f.default,{appName:r,isReplyStyle:!1,author:a,lastActiveAt:l},u.default.createElement("span",{className:"intercom-note-close intercom-anchor",onClick:i,"aria-label":(0,h.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&i(e)},role:"button",tabIndex:"0"}," "),u.default.createElement("div",{className:this.getBodyClassName()},u.default.createElement(d.default,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},u.default.createElement(p.default,{blocks:c,zoomable:!0,frameWindow:s}))),u.default.createElement("div",{ref:function(e){return t.footer=e},className:this.getFooterClassNames()},n?this.renderReactionPicker():this.renderFooter())))},r}(u.Component);(t.default=w).propTypes={appName:o.default.string.isRequired,message:o.default.shape({author:o.default.object.isRequired,body:o.default.array.isRequired,lastActiveAt:o.default.instanceOf(Date)}).isRequired,conversationId:o.default.string,reactionsReply:o.default.shape({reactionIndex:o.default.number,reactionSet:o.default.array.isRequired}),onClose:o.default.func,onComposerClick:o.default.func,onReactionSelect:o.default.func,frameWindow:o.default.object,showUploadButton:o.default.bool,showGifButton:o.default.bool,showReplyToButton:o.default.bool},w.defaultProps={showUploadButton:!0,showGifButton:!0},w.contextTypes={addMetric:o.default.func.isRequired}},1147:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),d=o(r(419)),p=o(r(1148)),f=o(r(429)),h=o(r(1075));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s(i(i(o=n.call.apply(n,[this].concat(t))||this)),"state",{width:0,height:0}),s(i(i(o)),"handleDimensionFrameSize",function(e){var t=e.height,r=e.width;o.setState({width:r,height:t})}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.frameStyles=function(){var e=this.state;return{width:e.width,height:e.height}},o.render=function(){var e=this,t=this.props,r=t.appName,o=t.appWindow,n=t.message,i=t.conversationId,s=t.onClose,a=t.reactionsReply,l=t.onComposerClick,c=t.onReactionSelect;return u.default.createElement(h.default,{appWindow:o,targetSelector:n.pointerSelector,childDimensions:this.frameStyles()},u.default.createElement(d.default,{style:this.frameStyles(),frameName:"intercom-pointer-frame",className:"intercom-pointer-frame"},function(){return u.default.createElement(f.default,{id:"pointer-frame",key:"pointer-frame",onChange:e.handleDimensionFrameSize},u.default.createElement(p.default,{appName:r,message:n,conversationId:i,reactionsReply:a,frameWindow:o,onComposerClick:l,onReactionSelect:c,onClose:s}))}))},r}(u.PureComponent);t.default=n},1148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(3)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),i=n(r(15)),d=n(r(1039)),p=n(r(1035)),f=n(r(828)),s=n(r(1044)),a=r(70),h=r(31),l=n(r(1149));function n(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v(m(m(o=n.call.apply(n,[this].concat(t))||this)),"node",void 0),v(m(m(o)),"state",{isFooterVisible:!0,isScrolled:!1}),v(m(m(o)),"footer",void 0),v(m(m(o)),"handleScroll",function(e){var t=o.state.isFooterVisible,r=(0,a.getScrollBottom)(e.target);o.setState({isFooterVisible:t||r<=o.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),v(m(m(o)),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,r=o.state.isFooterVisible||void 0===o.props.reactionsReply||t<=o.getReactionsVisibilityThreshold();o.setState({isFooterVisible:r})}),v(m(m(o)),"getBodyClassName",function(){return(0,i.default)({"intercom-pointer-body":!0,"intercom-replies-disabled":o.isReplyDisabled()})}),v(m(m(o)),"isReplyDisabled",function(){return"disabled"===o.props.message.replyType}),v(m(m(o)),"addClickedComposerMetric",function(){var e=o.props,t=e.message.id,r=e.conversationId;o.context.addMetric("clicked","composer","in_app","from_full",{message_type:"pointer",message_id:t,conversation_id:r})}),v(m(m(o)),"handleComposerClick",function(){o.addClickedComposerMetric(),o.props.onComposerClick()}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},o.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},o.getClassNames=function(){return(0,i.default)({"intercom-pointer":!0,"intercom-pointer-scrolled":this.state.isScrolled})},o.getFooterClassNames=function(){return(0,i.default)({"intercom-pointer-footer":!0,"intercom-pointer-footer-visible":this.state.isFooterVisible})},o.renderFooter=function(e){var t=this;return this.isReplyDisabled()?null:u.default.createElement("div",{ref:function(e){return t.footer=e},className:this.getFooterClassNames()},e?this.renderReactionPicker():this.renderChatComposer())},o.renderChatComposer=function(){var t=this;return u.default.createElement("div",{className:"intercom-pointer-composer",onClick:t.handleComposerClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleComposerClick(e)},role:"button",tabIndex:"0"},u.default.createElement("span",null,u.default.createElement(l.default,null)),u.default.createElement("span",{className:"intercom-composer-placeholder"},(0,h.translate)("start_a_conversation")))},o.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,r=e.onReactionSelect;return u.default.createElement(s.default,c({},t,{onReactionSelect:r}))},o.render=function(){var t=this,e=this.props,r=e.appName,o=e.message,n=e.reactionsReply,i=e.onClose,s=e.frameWindow,a=o.author,l=o.lastActiveAt,c=o.body;return u.default.createElement("div",{ref:function(e){return t.node=e},className:this.getClassNames()},u.default.createElement(f.default,{appName:r,isReplyStyle:!1,author:a,lastActiveAt:l},u.default.createElement("span",{className:"intercom-pointer-close",onClick:i,"aria-label":(0,h.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&i(e)},role:"button",tabIndex:"0"}," "),u.default.createElement("div",{className:this.getBodyClassName()},u.default.createElement(d.default,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},u.default.createElement(p.default,{blocks:c,zoomable:!0,frameWindow:s}))),this.renderFooter(n)))},r}(u.Component);(t.default=y).contextTypes={addMetric:o.default.func.isRequired}},1149:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"intercom-chat-bubble-icon"},n.default.createElement("path",{d:"M7.357 1.071c.34-.035.679-.071.982-.071 3 0 6.304 2.054 6.625 5.59.018.214.036.428.036.642 0 3.054-2.518 6.179-6.357 6.697A6.958 6.958 0 0 1 7.75 14c-.357 0-.357 0-.75-.071-.91 1.178-1.982 1.482-3.16 1.696a3.184 3.184 0 0 1-.536.054c-.304 0-.733-.143-.536-.34.928-.785 1.036-1.303 1.036-2.214 0-.09 0-.179-.018-.268-1.625-1.107-2.536-2.571-2.75-4.446A7.753 7.753 0 0 1 1 7.768C1 4.714 3.518 1.589 7.357 1.07z"}))};var o,n=(o=r(2))&&o.__esModule?o:{default:o}},1151:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=r(2),i=(o=r(68))&&o.__esModule?o:{default:o};function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(n){var e,t;function r(e){var t;a(s(s(t=n.call(this,e)||this)),"document",t.props.appWindow.document),a(s(s(t)),"container",void 0);var r=e.appWindow,o=r.document.body;return o?(t.container=r.document.createElement("div"),t.container.id="intercom-positioner-tree",t.container.style.cssText="position: initial; !important; z-index: 2147483647 !important;",o.insertBefore(t.container,o.firstChild),t):s(t)}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentWillUnmount=function(){var e=this.props.appWindow.document.body,t=this.container;e&&t&&e.removeChild(t)},o.render=function(){return i.default.createPortal(this.props.children,this.container)},r}(n.Component);t.default=l},1152:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveIntersectionWindowContext=t.default=void 0;t.default=function(m){if(!m.IntercomIntersectionObserver){var v=m.document;if("IntersectionObserver"in m&&"IntersectionObserverEntry"in m&&"intersectionRatio"in m.IntersectionObserverEntry.prototype&&"isIntersecting"in m.IntersectionObserverEntry.prototype)return m.IntercomIntersectionObserver=m.IntersectionObserver,m.IntercomIntersectionObserverEntry=m.IntersectionObserverEntry,!0;var t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,r){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==r[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(m,"resize",this._checkForIntersections,!0),r(v,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in m&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(v,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(m,"resize",this._checkForIntersections,!0),o(v,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var a=this._rootIsInDom(),l=a?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,r=y(t),o=this._rootContainsTarget(t),n=e.entry,i=a&&o&&this._computeTargetAndRootIntersection(t,l),s=e.entry=new c({time:m.performance&&performance.now&&performance.now(),target:t,boundingClientRect:r,rootBounds:l,intersectionRect:i});n?a&&o?this._hasCrossedThreshold(n,s)&&this._queuedEntries.push(s):n&&n.isIntersecting&&this._queuedEntries.push(s):this._queuedEntries.push(s)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=m.getComputedStyle(e).display){for(var r,o,n,i,s,a,l,c,u=y(e),d=b(e),p=!1;!p;){var f=null,h=1==d.nodeType?m.getComputedStyle(d):{};if("none"==h.display)return;if(d==this.root||d==v?(p=!0,f=t):d!=v.body&&d!=v.documentElement&&"visible"!=h.overflow&&(f=y(d)),f&&(r=f,o=u,n=Math.max(r.top,o.top),i=Math.min(r.bottom,o.bottom),s=Math.max(r.left,o.left),a=Math.min(r.right,o.right),c=i-n,!(u=0<=(l=a-s)&&0<=c&&{top:n,bottom:i,left:s,right:a,width:l,height:c})))break;d=b(d)}return u}},e.prototype._getRootRect=function(){var e;if(this.root)e=y(this.root);else{var t=v.documentElement,r=v.body;e={top:0,left:0,right:t.clientWidth||r.clientWidth,width:t.clientWidth||r.clientWidth,bottom:t.clientHeight||r.clientHeight,height:t.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(r){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?r.width:r.height)/100}),t={top:r.top-e[0],right:r.right+e[1],bottom:r.bottom+e[2],left:r.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var r=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(r!==o)for(var n=0;n<this.thresholds.length;n++){var i=this.thresholds[n];if(i==r||i==o||i<r!=i<o)return!0}},e.prototype._rootIsInDom=function(){return!this.root||n(v,this.root)},e.prototype._rootContainsTarget=function(e){return n(this.root||v,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},m.IntercomIntersectionObserver=e,m.IntercomIntersectionObserverEntry=m.IntersectionObserverEntry}function c(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,r=t.width*t.height,o=this.intersectionRect,n=o.width*o.height;this.intersectionRatio=r?n/r:this.isIntersecting?1:0}function e(e,t){var r,o,n,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(r=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,n=null,function(){n||(n=setTimeout(function(){r(),n=null},o))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(e,t,r,o){"function"==typeof e.addEventListener?e.addEventListener(t,r,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,r)}function o(e,t,r,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,r,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,r)}function y(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function n(e,t){for(var r=t;r;){if(r==e)return!0;r=b(r)}return!1}function b(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}};t.RemoveIntersectionWindowContext=function(e){e.IntercomIntersectionObserver&&(delete e.IntercomIntersectionObserver,delete e.IntercomIntersectionObserverEntry)}},1153:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeScrollIntoViewPolyfill=t.default=void 0;t.default=function(e){var l=e,c=e.document,t=l.HTMLElement||l.Element,s=800,u={scroll:l.scroll||l.scrollTo,scrollBy:l.scrollBy||l.intercomScrollBy,elementScroll:p,intercomScrollIntoView:t.prototype.intercomScrollIntoView},d=l.performance&&l.performance.now?l.performance.now.bind(l.performance):Date.now;var r,o=(r=l.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);function p(e,t){this.scrollLeft=e,this.scrollTop=t}function n(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function i(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function a(e,t){var r=l.getComputedStyle(e,null)["overflow"+t];return"auto"===r||"scroll"===r}function f(e){var t,r,o,n,i=(d()-e.startTime)/s;n=i=1<i?1:i,t=.5*(1-Math.cos(Math.PI*n)),r=e.startX+(e.x-e.startX)*t,o=e.startY+(e.y-e.startY)*t,e.method.call(e.scrollable,r,o),r===e.x&&o===e.y||l.requestAnimationFrame(f.bind(l,e))}function h(e,t,r){var o,n,i,s,a=d();s=e===c.body?(n=(o=l).scrollX||l.pageXOffset,i=l.scrollY||l.pageYOffset,u.scroll):(n=(o=e).scrollLeft,i=e.scrollTop,p),f({scrollable:o,method:s,startTime:a,startX:n,startY:i,x:t,y:r})}l.intercomScrollBy=function(){void 0!==arguments[0]&&(n(arguments[0])?u.scrollBy.call(l,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):h.call(l,c.body,~~arguments[0].left+(l.scrollX||l.pageXOffset),~~arguments[0].top+(l.scrollY||l.pageYOffset)))},t.prototype.intercomScrollIntoView=function(){if(!0!==n(arguments[0])){var e=function(e){for(var t,r,o;0==((e=e.parentNode)===c.body)&&!1===(r=i(t=e,"Y")&&a(t,"Y"),o=i(t,"X")&&a(t,"X"),r||o););return e}(this),t=e.getBoundingClientRect(),r=this.getBoundingClientRect();e!==c.body?(h.call(this,e,e.scrollLeft+r.left-t.left,e.scrollTop+r.top-t.top),"fixed"!==l.getComputedStyle(e).position&&l.intercomScrollBy({left:t.left,top:t.top,behavior:"smooth"})):l.intercomScrollBy({left:r.left,top:r.top,behavior:"smooth"})}else u.intercomScrollIntoView.call(this,void 0===arguments[0]||arguments[0])}};t.removeScrollIntoViewPolyfill=function(e){var t=e;(t.HTMLElement||t.Element).prototype.intercomScrollIntoView=null,t.intercomScrollBy&&delete t.intercomScrollBy}},1154:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),a=r(128),l=o(r(1067)),i=o(r(1078)),c=o(r(15)),u=r(31),d=o(r(1038)),p=o(r(1040));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return h(f(f(e=n.call.apply(n,[this].concat(r))||this)),"video",void 0),h(f(f(e)),"state",{isExpanded:!1,isVideoLoaded:!1}),h(f(f(e)),"handleOverlayClick",function(){e.state.isVideoLoaded&&e.setState({isExpanded:!0})}),h(f(f(e)),"handleVideoLoaded",function(){e.setState({isVideoLoaded:!0})}),e}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getClassNames=function(){return(0,c.default)({"intercom-story-container":!0,"intercom-story-container-standalone":this.props.standalone,"intercom-story-container-expanded":this.state.isExpanded,"intercom-story-container-loaded":this.state.isVideoLoaded})},o.renderDismissButton=function(){var t=this;return this.props.standalone?s.default.createElement("div",{className:"intercom-story-dismiss-button",onClick:t.props.onClose,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.props.onClose(e)},role:"button",tabIndex:"0"},s.default.createElement("span",null)):null},o.renderOverlay=function(){var t=this;return this.state.isExpanded?null:s.default.createElement("div",{className:"intercom-story-overlay",onClick:t.handleOverlayClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleOverlayClick(e)},role:"button",tabIndex:"0"})},o.renderComposer=function(){var e=this.props,t=e.part,r=e.onComposerOrFormInputClick,o=t.author.firstName;return s.default.createElement(a.CSSTransition,{classNames:"intercom-video-composer",timeout:{enter:400,exit:400}},s.default.createElement("div",{className:"intercom-composer-story-wrapper"},s.default.createElement("div",{className:"intercom-chat-composer",onClick:r,"aria-label":(0,u.translate)("open_conversation_and_reply"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&r(e)},role:"button",tabIndex:"0"},s.default.createElement("span",{className:"intercom-composer-placeholder"},(0,u.translate)("reply_to_name",{name:o})),s.default.createElement("div",{className:"intercom-composer-buttons"},s.default.createElement("span",{className:"intercom-composer-emoji-button"},s.default.createElement(p.default,null)),s.default.createElement("span",{className:"intercom-composer-upload-button"},s.default.createElement(d.default,null))))))},o.renderQuickReplies=function(){var e=this.props.conversation;return e?s.default.createElement(i.default,{conversation:e,isVisible:!0}):null},o.renderResponseArea=function(){return this.state.isExpanded&&this.props.showResponseArea?(e=this.props.part)&&e.replyOptions&&0<e.replyOptions.length?this.renderQuickReplies():this.renderComposer():null;var e},o.render=function(){var e=this.props,t=e.part.body,r=e.autoPlay,o=t[0],n=o.url,i=o.captions;return s.default.createElement("div",{className:this.getClassNames()},this.renderDismissButton(),s.default.createElement("div",{className:"intercom-story"},this.renderOverlay(),s.default.createElement(l.default,{srcUrl:n,autoPlay:r,onVideoLoaded:this.handleVideoLoaded,captions:i})),s.default.createElement(a.TransitionGroup,null,this.renderResponseArea()))},r}(s.Component);h(t.default=n,"defaultProps",{standalone:!1,onClose:function(){},showResponseArea:!0,autoPlay:!1})},1159:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(3)),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),c=n(r(419)),u=n(r(1160)),i=n(r(15));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(n){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return a(s(s(t=n.call.apply(n,[this].concat(r))||this)),"state",{height:0,isPopoverOpen:!1}),a(s(s(t)),"handleHeightChange",function(e){t.setState({height:e})}),a(s(s(t)),"handlePopoverToggle",function(e){t.setState({isPopoverOpen:e})}),t}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getStyle=function(){return{height:this.state.height}},o.getClassName=function(){return(0,i.default)({"intercom-borderless-frame":!0,"intercom-borderless-frame-extended":this.state.isPopoverOpen})},o.render=function(){var r=this,e=this.props,o=e.conversation,n=e.part,i=e.onClose,s=e.onComposerClick,a=e.showReplyToButton;return l.default.createElement(c.default,{style:this.getStyle(),className:this.getClassName(),frameName:"intercom-borderless-frame"},function(e,t){return l.default.createElement(u.default,{conversation:o,part:n,frameWindow:e,onClose:i,onHeightChange:r.handleHeightChange,onPopoverToggle:r.handlePopoverToggle,onComposerClick:s,showReplyToButton:a,frameNode:t})})},r}(l.Component);(t.default=d).propTypes={conversation:o.default.object.isRequired,part:o.default.object.isRequired,onClose:o.default.func.isRequired,onComposerClick:o.default.func,showReplyToButton:o.default.bool}},1160:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var o=r(37),n=r(1082),u=r(714),i=r(55),s=r(165).openBorderlessConversationInMessenger,a=r(1055).openArticle,l=r(1206).openBorderlessConversation,c=r(166),d=c.createPart,p=c.createReaction,f=function(e,t){var r=e.app.name,o=e.user.role,n=t.part,i=t.conversation,s=(0,u.customizationSelector)(e).alignment,a=i.parts.filter(function(e){return e.createdAt>=n.createdAt}),l=a[0].messageType;l=l||"adminReply",a[0]=Object.assign({},a[0],{messageType:l});var c=a.length<i.parts.length;return{appName:r,userRole:o,conversation:Object.assign({},i,{parts:a}),hasHistory:c,alignment:s}};t.mapStateToProps=f;var h=function(r){return{onOpen:function(e){r(l(e))},onRetry:function(e,t){r(d(i,e,t,!0))},onReactionSelect:function(e,t){r(p(i,e,t,!1))},onArticleCardClick:function(e,t){r(a(i,e,t))},onViewMore:function(e,t){r(s(e,"viewmore_borderless",t))}}};t.mapDispatchToProps=h;var m=function(e,t,r){var o=e.conversation,n=o.id,i=o.lastParticipatingAdmin,s={onOpen:function(){t.onOpen(n)},onReactionSelect:function(e){t.onReactionSelect(n,e)},onRetry:function(e){t.onRetry(n,e)},onViewMore:function(){t.onViewMore(n,i)},conversation:o};return Object.assign({},e,t,r,s)};t.mergeProps=m;var v=(0,o.connect)(f,h,m)(n.IndexedBorderlessConversation);t.default=v},1190:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),s=(o=r(1086))&&o.__esModule?o:{default:o},a=r(44);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return u(c(c(t=n.call.apply(n,[this].concat(r))||this)),"ref",void 0),u(c(c(t)),"setRef",function(e){t.ref=e}),t}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){(0,a.isVisible)(this.props.conversation)&&this.handleShow()},o.componentDidUpdate=function(e){!(0,a.isVisible)(e.conversation)&&(0,a.isVisible)(this.props.conversation)?this.handleShow():(0,a.isVisible)(e.conversation)&&!(0,a.isVisible)(this.props.conversation)&&this.handleHide()},o.handleShow=function(){this.props.onShow(this.getHeight())},o.handleHide=function(){this.props.onHide()},o.getHeight=function(){return this.ref?this.ref.clientHeight:0},o.render=function(){return(0,a.isVisible)(this.props.conversation)?i.default.createElement("div",{ref:this.setRef,className:"intercom-borderless-conversation-composer"},i.default.createElement(s.default,l({isBorderless:!0},this.props))):null},r}(i.PureComponent);t.default=n},1203:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),o=n(r(3)),s=n(r(15)),a=r(70),l=r(1082),c=r(1085),u=r(1204);function n(e){return e&&e.__esModule?e:{default:e}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(n){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return p(d(d(e=n.call.apply(n,[this].concat(r))||this)),"isPartBeingAddedTimeout",void 0),p(d(d(e)),"borderlessBodyNode",void 0),p(d(d(e)),"visibleScrollbarsInOs",0!==(0,u.getScrollbarWidth)()),p(d(d(e)),"metricForScrollCaptured",!1),p(d(d(e)),"metricForCanScrollCaptured",!1),p(d(d(e)),"state",{isPartBeingAdded:!1,bottomScrollOffset:0,frameOffsetTop:e.props.frameNode.offsetTop,adminWasTyping:!1}),p(d(d(e)),"recalculateOffsets",function(){e.setState({frameOffsetTop:e.props.frameNode.offsetTop},function(){return(0,a.scrollToBottom)(e.borderlessBodyNode)})}),p(d(d(e)),"handleScroll",function(){e.state.isPartBeingAdded||e.setState({bottomScrollOffset:(0,a.bottomScrollOffset)(e.borderlessBodyNode)})}),e}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){(0,a.addEventListener)(window.parent,"resize",this.recalculateOffsets)},o.componentDidUpdate=function(e){var t=this,r=this.props,o=r.conversation,n=r.frameNode,i=(0,c.shouldShowAdminIsTyping)(o);(o.parts.length!==e.conversation.parts.length||i&&!this.state.adminWasTyping)&&((0,a.scrollToBottom)(this.borderlessBodyNode),clearTimeout(this.isPartBeingAddedTimeout),this.setState({isPartBeingAdded:!0,bottomScrollOffset:0}),this.isPartBeingAddedTimeout=setTimeout(function(){t.setState({isPartBeingAdded:!1,frameOffsetTop:n.offsetTop}),(0,a.scrollToBottom)(t.borderlessBodyNode)},300)),i!==this.state.adminWasTyping&&this.setState({adminWasTyping:i}),this.captureMetrics()},o.componentWillUnmount=function(){clearTimeout(this.isPartBeingAddedTimeout),(0,a.removeEventListener)(window.parent,"resize",this.recalculateOffsets)},o.getStyle=function(){var e=this.props,t=e.borderlessHeight,r=e.composerHeight,o=this.state.frameOffsetTop;if(t&&!o){var n=t/100,i=100-10/n,s="linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) "+(100-76/n)+"%, rgba(0, 0, 0, "+Math.max(1-this.state.bottomScrollOffset/100*5,0)+") "+i+"%)";return{maxHeight:t-r-l.PARTS_BODY_PADDING+"px",WebkitMaskImage:s,MaskImage:s}}},o.getClassName=function(){return(0,s.default)({"intercom-borderless-conversation-body":!0,"intercom-borderless-conversation-body-enable-scroll":0===this.state.frameOffsetTop,"intercom-borderless-conversation-body-visible-scrollbars":this.visibleScrollbarsInOs})},o.captureMetrics=function(){!this.metricForScrollCaptured&&35<this.state.bottomScrollOffset&&(this.addMetric("scroll"),this.metricForScrollCaptured=!0),this.metricForCanScrollCaptured||0!==this.state.frameOffsetTop||(this.addMetric("can_scroll"),this.metricForCanScrollCaptured=!0)},o.addMetric=function(e){this.context.addMetric(e,"conversation","borderless","",{parts_length:this.props.conversation.parts.length})},o.render=function(){var t=this;return i.default.createElement("div",{className:this.getClassName(),style:this.getStyle(),ref:function(e){return t.borderlessBodyNode=e},onScroll:this.handleScroll},this.props.children({isScrolled:10<this.state.bottomScrollOffset}))},r}(i.Component);(t.default=f).contextTypes={addMetric:o.default.func}},1204:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollbarWidth=function(){var e=window.parent.document,t=e.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",e.body.appendChild(t);var r=t.offsetWidth;t.style.overflow="scroll";var o=e.createElement("div");o.style.width="100%",t.appendChild(o);var n=o.offsetWidth;return t.parentNode.removeChild(t),r-n}},1206:function(e,t,r){"use strict";e.exports={openBorderlessConversation:function(e){return{type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e}}}},1207:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeMessage=t.openMessage=void 0;t.openMessage=function(e,t){return{type:"OPEN_POINTER_MESSAGE",conversationId:e,partId:t}};t.closeMessage=function(){return{type:"CLOSE_POINTER_MESSAGE"}}},1208:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),d=o(r(419)),p=o(r(1209)),f=o(r(429)),h=o(r(1075));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s(i(i(o=n.call.apply(n,[this].concat(t))||this)),"state",{width:0,height:0}),s(i(i(o)),"handleDimensionFrameSize",function(e){var t=e.height,r=e.width;o.setState({width:r,height:t})}),s(i(i(o)),"handleOnTourContinue",function(){var e=o.props.onContinue;o.setState({width:0,height:0}),e()}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getFrameDimensions=function(){var e=this.state;return{width:e.width,height:e.height}},o.render=function(){var e=this,t=this.props,r=t.appWindow,o=t.appName,n=t.author,i=t.activeStep,s=t.stepCount,a=t.activeStepIndex,l=t.onStop,c=!!i.selector;return u.default.createElement(h.default,{appWindow:r,scrollable:!0,targetSelector:i.selector,childDimensions:this.getFrameDimensions(),renderFallback:!0,key:"tour-step-"+i.id},u.default.createElement(d.default,{style:this.getFrameDimensions(),frameName:"intercom-tour-frame",className:"intercom-tour-frame"},function(){return u.default.createElement(f.default,{id:"tour-frame",key:"tour-frame",onChange:e.handleDimensionFrameSize},u.default.createElement(p.default,{appWindow:r,appName:o,author:n,step:i,activeStepIndex:a,stepCount:s,hasSelector:c,onContinue:e.handleOnTourContinue,onStop:l}))}))},r}(u.PureComponent);t.default=n},1209:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(2)),i=o(r(15)),u=o(r(1035)),d=o(r(1039)),p=r(31),f=o(r(828)),h=o(r(830));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return a(s(s(t=n.call.apply(n,[this].concat(r))||this)),"node",void 0),a(s(s(t)),"state",{isScrolled:!1}),a(s(s(t)),"handleScroll",function(e){t.setState({isScrolled:0<e.target.scrollTop})}),t}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getClassNames=function(){return(0,i.default)({"intercom-tour-step":!0,"intercom-tour-step-pointer":this.props.hasSelector,"intercom-tour-step-post":!this.props.hasSelector,"intercom-pointer-scrolled":this.state.isScrolled})},o.calculateWidth=function(){var e=this.props.appWindow.innerWidth;return Math.min(880,e)-80},o.getStyles=function(){if(!this.props.hasSelector)return{width:this.calculateWidth()+"px"}},o.render=function(){var t=this,e=this.props,r=e.onContinue,o=e.onStop,n=e.activeStepIndex,i=e.stepCount,s=e.author,a=e.appName,l=this.props.step.blocks;return c.default.createElement("div",{ref:function(e){return t.node=e},className:this.getClassNames(),style:this.getStyles()},c.default.createElement(f.default,{appName:a,isReplyStyle:!1,author:s},c.default.createElement("div",{className:"intercom-tour-step-header"},c.default.createElement("span",{className:"intercom-tour-close",onClick:o,"aria-label":(0,p.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&o(e)},role:"button",tabIndex:"0"},c.default.createElement(h.default,null))),c.default.createElement("div",{className:"intercom-tour-step-content"},c.default.createElement(d.default,{onScroll:this.handleScroll},c.default.createElement(u.default,{blocks:l}))),c.default.createElement("div",{className:"intercom-tour-step-footer"},c.default.createElement("div",{className:"intercom-tour-step-progress"},n+1," of ",i),c.default.createElement("div",{className:"intercom-tour-step-button"},c.default.createElement("button",{onClick:r,tabIndex:"0"},n+1===i?"Done":"Next")))))},r}(c.PureComponent);t.default=n}}]);